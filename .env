# Sample RAGS_tool configuration
# Copy or adjust these values before running the service.

QDRANT_URL=http://127.0.0.1:6333
QDRANT_API_KEY=
EMBEDDING_API_URL=http://127.0.0.1:8000/v1
EMBEDDING_API_KEY=sk-embed-xxx
EMBEDDING_MODEL=sdadas/mmlw-retrieval-roberta-large-v2
# Tokenizer spec: use tiktoken:<encoding> for OpenAI-compatible models,
# or hf:<model_name> for Hugging Face tokenizers.
# Example for sdadas/mmlw-retrieval-roberta-large-v2:
# EMBEDDING_TOKENIZER=hf:sdadas/mmlw-retrieval-roberta-large-v2
EMBEDDING_TOKENIZER=tiktoken:cl100k_base
EMBEDDING_DIM=1024
# Max tokens per single input to the embedding endpoint (safety cap)
EMBEDDING_MAX_TOKENS=300
# Prefixes for retrieval-style embedding models (defaults match
# sdadas/mmlw-retrieval-roberta-large-v2). Set to empty for models
# that do not expect instruction prefixes (e.g., some BGE variants).
EMBEDDING_QUERY_PREFIX="query: "
EMBEDDING_PASSAGE_PREFIX="passage: "
SUMMARY_API_URL=http://127.0.0.1:8001/v1
SUMMARY_API_KEY=sk-summary-xxx
SUMMARY_MODEL=gpt-oss:20b
SUMMARY_SYSTEM_PROMPT="Jesteś zwięzłym ekstrakcyjnym streszczaczem."
SUMMARY_PROMPT="Streść poniższy tekst w maks. 5 zdaniach. Wypisz też sekcje: 'TITLE' (krótki jednoznaczny tytuł, preferuj pierwszą linię lub numer dokumentu; jeśli masz wątpliwości preferuj Zarządzenie / Uchwała; max 50 znaków, zawsze w mianowniku), 'SIGNATURE' (10–20 lematów kluczowych), 'ENTITIES' (nazwy własne/ID/zakresy dat) oraz 'REPLACEMENT' (krótkie tytuły aktów zastępowanych, zawsze w mianowniku; może składać się jedynie z krótkich tytułów aktów zastępowanych, jeśli tekst jednolity wypisz wszystkie tytuły aktów które ujednolica, separator ';'; max 50 znaków na pozycję; wpisz dokładnie 'brak', jeśli brak informacji). Bez komentarzy.\n\nFORMAT:\nTITLE: ...\nSUMMARY: ...\nSIGNATURE: lemma1, lemma2, ...\nENTITIES: ...\nREPLACEMENT: ...\n\nTEKST:\n"
SUMMARY_PROMPT_JSON="Zwróć wyłącznie poprawny JSON bez komentarzy i bez kodu. Klucze: 'title' (string; krótki jednoznaczny tytuł, preferuj pierwszą linię lub numer dokumentu; jeśli masz wątpliwości preferuj Zarządzenie / Uchwała; max 50 znaków, zawsze w mianowniku), 'summary' (string; max 5 zdań po polsku), 'signature' (lista 10–20 lematów kluczowych jako strings), 'entities' (string z nazwami własnymi/ID/zakresami dat), 'replacement' (string; krótkie tytuły aktów zastępowanych, zawsze w mianowniku; może składać się jedynie z krótkich tytułów aktów zastępowanych, jeśli tekst jednolity wypisz wszystkie tytuły aktów które ujednolica, separator ';'; max 50 znaków na pozycję; wpisz dokładnie 'brak', jeśli brak informacji)."
SUMMARY_JSON_MODE=true
COLLECTION_NAME=rags_tool
VECTOR_STORE_DIR=/app/.rags_tool_store
DEBUG=true
SEARCH_TOOL_DESCRIPTION="Hybrydowe wyszukiwanie (dense + TF‑IDF) w korpusie dokumentów Politechniki Łódzkiej. Etap 1 wybiera dokumenty na podstawie streszczeń, Etap 2 wybiera fragmenty pełnego tekstu z MMR i limitem per‑dokument. Używaj, gdy pytanie dotyczy treści PŁ; nie używaj do wiedzy ogólnej. Preferuj result_format='blocks' (zwrot zwarte bloki dowodowe z polem 'path'). Dla regulacji obowiązujących ustaw mode='current', dla wersji historycznych mode='archival'."

# Search configuration
# If true, bypass Stage 1 (summaries) and search full corpus directly in Stage 2.
# Admin-only static switch (no API override).
# SEARCH_SKIP_STAGE1_DEFAULT=false

# Chunking defaults (token-based). Adjust to embedding model capacity.
# For sdadas/mmlw-retrieval-roberta-large-v2 (max ~512, 446 for WordPiece tokens),
# smaller chunks reduce truncation; tune as needed.
CHUNK_TOKENS=446 
CHUNK_OVERLAP=50

# --- RERANKER (OpenAI‑compatible). Pozostaw puste, aby wyłączyć. ---
# Ustaw bazę BEZ '/v1'. Klient automatycznie użyje '/v1/rerank'.
RANKER_BASE_URL=
RANKER_API_KEY=
RANKER_MODEL=sdadas/polish-reranker-roberta-v3
RERANK_TOP_N=50
RETURN_TOP_K=5
RANKER_SCORE_THRESHOLD=0.2
RANKER_MAX_LENGTH=2048
